"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("node:fs"),y=require("node:module"),_=require("@rollup/plugin-inject"),B=require("node-stdlib-browser"),S=require("node-stdlib-browser/helpers/rollup/plugin"),q=require("node-stdlib-browser/helpers/esbuild/plugin"),d=e=>e&&e.__esModule?e:{default:e},P=d(_),$=d(B),j=d(q),a=e=>e?e===!0?!0:e==="build":!1,i=e=>e?e===!0?!0:e==="dev":!1,R=e=>e.startsWith("node:"),w=(e={})=>{const u=y.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href),s=u.resolve("vite-plugin-node-polyfills/shims"),g=u.resolve("vite-plugin-node-polyfills/shims/banner"),p=v.readFileSync(g,"utf-8"),r={exclude:[],protocolImports:!0,...e,globals:{Buffer:!0,global:!0,process:!0,...e.globals}},m=t=>r.exclude.some(c=>t===c||t===`node:${c}`),h=t=>{if(i(r.globals.Buffer)&&/^(?:node:)?buffer$/.test(t))return u.resolve("buffer-polyfill");if(i(r.globals.process)&&/^(?:node:)?process$/.test(t))return u.resolve("process-polyfill")};return{name:"vite-plugin-node-polyfills",config:(t,c)=>{const n=c.mode==="development",b=Object.entries($.default).reduce((l,[o,f])=>(!r.protocolImports&&R(o)||m(o)||(l[o]=h(o)||f),l),{});return{build:{rollupOptions:{onwarn:(l,o)=>{S.handleCircularDependancyWarning(l,o)},plugins:[{...P.default({...a(r.globals.Buffer)?{Buffer:[s,"Buffer"]}:{},...a(r.globals.global)?{global:[s,"global"]}:{},...a(r.globals.process)?{process:[s,"process"]}:{}})}]}},esbuild:{banner:n?p:void 0},optimizeDeps:{esbuildOptions:{banner:n?{js:p}:void 0,define:{...n&&i(r.globals.Buffer)?{Buffer:"Buffer"}:{},...n&&i(r.globals.global)?{global:"global"}:{},...n&&i(r.globals.process)?{process:"process"}:{}},inject:[s],plugins:[j.default(b),{name:"vite-plugin-node-polyfills-shims-resolver",setup(l){const o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),f=new RegExp(`^${o}$`);l.onResolve({filter:f},()=>({external:!1,path:s}))}}]}},resolve:{alias:{...b}}}}}};exports.nodePolyfills=w;
//# sourceMappingURL=index.cjs.map
